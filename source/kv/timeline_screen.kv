<LoadDisplay>:

<TimeScale>:

<TasksOverview>:
    do_scroll_x: False
    do_scroll_y: True

<TaskOverviewItem>:
    name: "task"
    group: "group"
    deadline: "deadline"
    days: 1
    speed: 0
    deadline_label: _deadline
    time_scale: 180

    slider: _slider
    orientation: 'horizontal'
    BoxLayout:
        size_hint: 0.4, 1
        orientation: 'vertical'
        spacing: 1
        padding: [1, 1, 1, 1]
        canvas:
            Color:
                rgb: 1, 1, 1
            Line:
                points: self.pos[0], self.pos[1],  self.pos[0] + self.size[0], self.pos[1]
        BoxLayout:
            orientation: 'horizontal'
            spacing: 1
            padding: [1, 1, 1, 1]
            Label:
                split_str: " "
                text: root.name
                text_size: (self.size[0], None)
                halign: 'left'
                valign: 'center'
                shorten: True
                shorten_from: 'left'
            Label:
                id: _deadline
                text: root.deadline
                text_size: self.size
                halign: 'right'
                valign: 'center'
        Label:
            split_str: "/"
            text: root.group
            text_size: self.size
            halign: 'left'
            valign: 'center'
            shorten: True
            shorten_from: 'left'
    TimeSlider:
        id: _slider
        speed: root.speed
        expected_speed: root.speed
        deadline_label: _deadline
        deadline: root.deadline
        max: root.time_scale
        days: root.days

<TimelineScreen>:
    name: "timeline_screen"
    tasks: _tasks
    time_scale: _scale
    load_display: _load_display
    BoxLayout:
        orientation: 'vertical'
        TasksOverview:
            id: _tasks
            time_scale: _scale.value
        BoxLayout:
            size_hint: (1, 0.1)
            Slider:
                size_hint: (0.4, 1)
                id: _scale
                min: 7
                max: 371
                step: 7
                value: 180
            TimeScale:
                max_days: _scale.value
        BoxLayout:
            size_hint: (1, 0.05)
            Label:
                size_hint: (0.4, 1)
                text: 'Load'
            LoadDisplay:
                id: _load_display
                max_days: _scale.value
                tasks: _tasks
        BoxLayout:
            size_hint: (1, 0.1)
            orientation: 'horizontal'
            Button:
                size_hint: (0.1, 1)
                text: 'Back'
                on_press: root.manager.current = 'group_screen'
            Label:
                id: _info
                text: ""
            ApplyDeadlineButton:
                info: _info
                tasks: _tasks
                screen_manager: root.manager
                size_hint: (0.1, 1)
                text: 'Apply'

